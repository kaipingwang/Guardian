<!DOCTYPE html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
 <link rel="stylesheet"  href="mystyle.css" />
 
</head>

<body>

<!-- Begin Container -->
<div id="container">
	<!-- Begin Logo -->
	<div id="logo">
      <div id="searchbox">
            
                <input type="text" name="text" id="searchContent" style="height:13px;width: 215px">
                <button id="clickOnce">Search</button>
    </div>

</div>

<div id="addContent"></div>
<!--End Logo -->
	<!-- Begin Navigation -->
	<div id="navigation" style="width: 963px;">
<button id="politicsDiv" class="inactiveTabButton">Politics</button>
<button id="footballDiv" class="inactiveTabButton">Football</button>
<button id="USDiv" class="inactiveTabButton">US</button>
<button id="businessDiv" class="inactiveTabButton">Business</button>
<button id="sportDiv" class="inactiveTabButton">Sport</button>
<button id="US-electionDiv" class="inactiveTabButton">US Election</button>
<button id="cleaning" class="inactiveTabButton" id = "cleanall">Clean All </button>

</div>

<div id = "timeline">
<a class="twitter-timeline" href="https://twitter.com/hashtag/USElection" data-widget-id="804084678709956608">#USElection Tweets</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
<!-- End Navigation -->
	<!-- Begin Content -->
<div id="content">
<script  src="Assn_4.js"></script>
<div id="politics"></div>
<div id="football"></div>
<div id="US"></div>
<div id="business"></div>
<div id="sport"></div>	
<div id="US-election"></div>
<div id="add-content"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script>   
    
        $(document).ready(function() {

        var apikey = "a38b837a-e535-492d-a692-64cff29c43c3";
        var baseUrl = "http://content.guardianapis.com/search";
        // construct the uri with our apikey
        var guardiansSearchUrl = baseUrl + '?api-key=' + apikey + "&show-fields=all"+"&page-size=50";
            $("#clickOnce").click(function() {
                var query = $("#searchContent").val();
                //send off the query
                $.ajax({
                    url: guardiansSearchUrl + '&q=' + encodeURI(query),
                    dataType: "jsonp",
                    success: function searchCallback(data) {
                         
                        var guardians = data.response.results;
                        
                        ////remove previous search results before adding the new ones
                        $('#politics').empty();
                        $('#football').empty();
                        $('#US').empty();
                        $('#business').empty();
                        $('#sport').empty();
                        $('#US-election').empty();
                        $('#add-content').empty();
                        $('#addcontent').empty();
                        //receive the results
                        $('#addContent').append( 'Search key word: '+(query == ""? " none " : query)+' about ' +data.response.total +' results'+'(show maximum 50 pieces)'+'<hr/>');
                        $.each(guardians, function(index, guardian) {      
							var inner='<div><div><p id="title">'+guardian.webTitle+'</p></div><p class="sizeDate">'+guardian.webPublicationDate+'</p>'+'<div><img class="pic" src="'+guardian.fields.thumbnail+'"></div><p>'+guardian.fields.standfirst+'</p>'+'<span><a href="'+guardian.webUrl+'">'+guardian.webUrl+'</a><span><div>'
							$('#add-content').append(inner);
                             //remove the picture which cannot display
                             $("img").error(function () {
                             $(this).remove();
                             });
                        });
                    }
                });
            });
            });


  </script> 
  
	</div>
<!-- End Content -->
	<!-- Begin Footer -->
	<div id="footer">
	
		<p class="copyrighttext">Copyright &copy 2016</p>
  </div>
  <!-- End Footer -->
</div>
<!-- End Container -->

</body>

</html>

